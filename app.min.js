"use strict";function run(e,t,n,o){e.$on("$routeChangeStart",function(e,t,n){}),e.facebookAppId="[]"}function keyboardCtrl(e,t){function n(t){console.log("letter again = ",r.letter),$(".highlightLetter").removeClass("highlightLetter")," "==t?o="spacebar":u.indexOf(t)>-1?o="c"+p[u.indexOf(t)]:(o="c"+p[s.indexOf(t)],$(".shiftKey").addClass("highlightLetter")),console.log("letter again = ",r.letter,o),e.find("."+o).addClass("highlightLetter")}var o,r=this,i=r.keyboard;console.log("letter = ",r.letter);var a=[];for(var l in i)for(var c=0;c<i[l].length;c++)a.push(i[l][c]);this.$onInit=function(){n(r.letter)};var p=(a.map(function(e){return e.en}),a.map(function(e){return e.code})),u=a.map(function(e){return e.np}),s=a.map(function(e){return e.npShift});console.log("in components",r.word,r.letter),this.$onChanges=function(e){console.log("changed in components",e.word,e.letter.currentValue),n(e.letter.currentValue)}}function HeaderCtrl(e){}function FooterCtrl(e){}function PracticeCtrl(e,t,n,o,r,i){function a(){v=O.split(" "),S=v.length,C=0,b=0,w=0,k=!1,m.highlight=v[C],m.highlightSingle="",m.text=v,setTimeout(function(){s()},1e3),m.isloading=!1}function l(){var t=j.length,n=v[C].substring(0,t);console.log(j,n),j!=n?m.alert=!0:(m.alert=!1,k&&b++,b=t,k=!0,u()),e.$apply()}function c(){console.log("space has been pressed"),j===v[C]&&(b=0,A+=j+" ",j="",m.sentence=A,m.word=j,C++,w=w+b+1,b=0,e.$apply(),C>=m.text.length?(U=!0,r.cancel(F),stop=void 0,m.msgbox=!0,console.log("string complete",m.msgbox),e.$apply()):(p(),s()),f())}function p(){m.highlight=v[C],u()}function u(){var e=v[C].charAt(b);if(""==e)return void(m.highlightSingle=" ");m.highlightSingle=e}function s(){var e=C+1;n.find(".text span").removeClass("highlightWord"),n.find(".text > span:nth-child("+e+")").addClass("highlightWord")}function d(){var e=new Date;x=e.getTime(),F=r(function(){m.time+=1},1e3)}function f(){var e=new Date,t=e.getTime(),n=t-x;m.timeTaken=n;var o=w/6*6e4/n;m.speed=Math.round(o)}function h(){m.art={title:H.title,author:H.author},console.log("textAll",H)}var m=this,g=t.param;void 0!==g&&""!=g||(g=Math.floor(10*Math.random())),console.log("param = ",g),m.isloading=!0;var v,S,y=!0,C=0,b=0,w=0,k=!1,x=0;m.time=0;var F,j="",A="",P=o.unicode,U=!1;m.sentence="",m.word="Type here",m.alert=!1;var O="सानो छ खेत",H={};i.getString(g).then(function(e){var t=e.data;console.log(t),H=t.data,O=t.data.text,a(),h()}).catch(function(e){console.log(e)}),m.keyboard=P;var L=[];for(var T in P)for(var E=0;E<P[T].length;E++)L.push(P[T][E]);var z=(L.map(function(e){return e.en}),L.map(function(e){return e.code}));L.map(function(e){return e.np}),L.map(function(e){return e.npShift});$(".writeArea").on("click",function(){n.find(".writeArea input").focus()}),n.find(".writeArea input").on("keydown",function(t){if(console.log("yo here"),!U){y&&(y=!1,d());var n=t.which||t.charCode,o=t.shiftKey;if(8==n||46==n)console.log("backspace"),k&&b>0&&(b-=1,console.log("backspace",b)),j=j.substring(0,j.length-1),m.word=j,e.$apply(),l();else if(32==n)console.log("space has been pressed 1"),c();else{n+="";var r="";console.log("code = ",n,z.indexOf(n)),z.indexOf(n)>-1&&(r=o?L[z.indexOf(n)].npShift:L[z.indexOf(n)].np,console.log(r),j+=r,m.inputChar="",m.word=j,e.$apply(),l())}}}),m.highlightSingleFn=function(){U||u()}}function HomeCtrl(e){}function EditorCtrl(e){for(var t=["000000","FF9966","6699FF","99FF66","CC0000","00CC00","0000CC","333333","0066FF","FFFFFF"],n=$(".fore-palette"),o=$(".back-palette"),r=0;r<t.length;r++)n.append('<a href="#" data-command="forecolor" data-value="#'+t[r]+'" style="background-color:#'+t[r]+';" class="palette-item"></a>'),o.append('<a href="#" data-command="backcolor" data-value="#'+t[r]+'" style="background-color:#'+t[r]+';" class="palette-item"></a>');$(".toolbar a").click(function(e){var t=$(this).data("command");"h1"!=t&&"h2"!=t&&"p"!=t||document.execCommand("formatBlock",!1,t),"forecolor"!=t&&"backcolor"!=t||document.execCommand($(this).data("command"),!1,$(this).data("value")),"createlink"==t||"insertimage"==t?(url=prompt("Enter the link here: ","http://"),document.execCommand($(this).data("command"),!1,url)):document.execCommand($(this).data("command"),!1,null)})}var app=angular.module("typali",["ui.router","ngSanitize","angular-loading-bar"]).config(["$locationProvider","$stateProvider","$urlRouterProvider",function(e,t,n){e.hashPrefix("!"),n.otherwise("/404"),t.state("app",{url:"",views:{"header@":{controller:"HeaderCtrl",templateUrl:"components/common/header/header.tpl.html",controllerAs:"vm"},"footer@":{controller:"FooterCtrl",templateUrl:"components/common/footer/footer.tpl.html",controllerAs:"vm"}}}).state("app.404",{url:"/404",views:{"header@":{templateUrl:"components/common/header/header.tpl.html"}}}),e.html5Mode(!0)}]).run(["$rootScope","$location","authentication","$window",run]);angular.module("typali").component("keyboard2",{templateUrl:"components/common/keyboard/keyboard.tpl.html",controller:keyboardCtrl,bindings:{keyboard:"<",word:"<",letter:"<",shift:"<"}}),keyboardCtrl.$inject=["$document","$scope"],angular.module("typali").controller("HeaderCtrl",HeaderCtrl),HeaderCtrl.$inject=["$scope"],angular.module("typali").controller("FooterCtrl",FooterCtrl),FooterCtrl.$inject=["$scope"],angular.module("typali").config(["$stateProvider",function(e){e.state("app.practice",{url:"/practice",views:{"container@":{templateUrl:"views/practice/practice.tpl.html",controller:"practiceCtrl",controllerAs:"vm"}}}).state("app.practice.param",{url:"/:param",views:{"container@":{templateUrl:"views/practice/practice.tpl.html",controller:"practiceCtrl",controllerAs:"vm"}}})}]).controller("practiceCtrl",PracticeCtrl),PracticeCtrl.$inject=["$scope","$stateParams","$document","keyboardlayout","$interval","datafetchService"],angular.module("typali").config(["$stateProvider",function(e){e.state("app.home",{url:"/",views:{"container@":{templateUrl:"views/home/home.tpl.html",controller:"HomeCtrl",controllerAs:"vm"}}})}]).controller("HomeCtrl",HomeCtrl),HomeCtrl.$inject=["$scope"],angular.module("typali").config(["$stateProvider",function(e){e.state("app.editor",{url:"/editor",views:{"container@":{templateUrl:"views/editor/editor.tpl.html",controller:"editorCtrl",controllerAs:"vm"}}})}]).controller("editorCtrl",EditorCtrl),EditorCtrl.$inject=["$scope"],function(){function e(e,t){}angular.module("typali").config(["$stateProvider",function(e){e.state("app.register",{url:"/register",views:{"container@":{templateUrl:"auth/user-register/user-register.tpl.html",controller:"UserRegisterCtrl",controllerAs:"vm"}}})}]).controller("UserRegisterCtrl",e),e.$inject=["$location","authentication"]}(),function(){function e(e,t){var n=this;n.credentials={email:"yo@hotmail.com",password:""},n.onSubmit=function(){t.login(n.credentials).error(function(e){console.log(e)}).then(function(){e.path("profile")})}}angular.module("typali").config(["$stateProvider",function(e){e.state("app.login",{url:"/login",views:{"container@":{templateUrl:"auth/login/login.tpl.html",controller:"LoginCtrl",controllerAs:"vm"}}})}]).controller("LoginCtrl",e),e.$inject=["$location","authentication"]}(),angular.module("typali").factory("socket",["$rootScope",function(e){var t=io.connect();return{on:function(n,o){t.on(n,function(){var n=arguments;e.$apply(function(){o.apply(t,n)})})},emit:function(n,o,r){t.emit(n,o,function(){var n=arguments;e.$apply(function(){r&&r.apply(t,n)})})}}}]);var app=angular.module("typali");app.filter("limitobj",[function(){return function(e,t){if("object"!=typeof e)return[];var n=Object.keys(e);if(n.length<1||void 0===n)return[];var o=new Object,r=0;return angular.forEach(n,function(n,i){if(r>=t)return!1;o[n]=e[n],r++}),o}}]),angular.module("typali").factory("keyboardlayout",["$rootScope",function(e){var t={};return t.unicode={qwerty:[{code:"81",en:"q",npShift:"ठ",np:"ट"},{code:"87",en:"w",npShift:"औ",np:"ौ"},{code:"69",en:"e",npShift:"ै",np:"े"},{code:"82",en:"r",npShift:"ृ",np:"र"},{code:"84",en:"t",npShift:"थ",np:"त"},{code:"89",en:"y",npShift:"ञ",np:"य"},{code:"85",en:"u",npShift:"ू",np:"ु"},{code:"73",en:"i",npShift:"ी",np:"ि"},{code:"79",en:"o",npShift:"ओ",np:"ो"},{code:"80",en:"p",npShift:"फ",np:"प"},{code:"219",en:"[",npShift:"ई",np:"इ"},{code:"221",en:"]",npShift:"ऐ",np:"ए"},{code:"220",en:"\\",npShift:"ः",np:"ॐ"}],asdfg:[{code:"65",en:"a",npShift:"आ",np:"ा"},{code:"83",en:"s",npShift:"श",np:"स"},{code:"68",en:"d",npShift:"ध",np:"द"},{code:"70",en:"f",npShift:"ऊ",np:"उ"},{code:"71",en:"g",npShift:"घ",np:"ग"},{code:"72",en:"h",npShift:"अ",np:"ह"},{code:"74",en:"j",npShift:"झ",np:"ज"},{code:"75",en:"k",npShift:"ख",np:"क"},{code:"76",en:"l",npShift:"॥",np:"ल"},{code:"186",en:"l",npShift:":",np:";"},{code:"222",en:"l",npShift:'"',np:"'"}],zxcvb:[{code:"90",en:"z",npShift:"ऋ",np:"ष"},{code:"88",en:"x",npShift:"ढ",np:"ड"},{code:"67",en:"c",npShift:"च",np:"छ"},{code:"86",en:"v",npShift:"ँ",np:"व"},{code:"66",en:"b",npShift:"भ",np:"ब"},{code:"78",en:"n",npShift:"ण",np:"न"},{code:"77",en:"m",npShift:"ं",np:"म"},{code:"188",en:",",npShift:"ङ",np:","},{code:"190",en:".",npShift:">",np:"।"},{code:"191",en:"/",npShift:"?",np:"्"}],1234:[{code:"192",en:"`",enShift:"~",npShift:"~",np:"`"},{code:"49",en:"1",npShift:"!",np:"१"},{code:"50",en:"2",npShift:"@",np:"२"},{code:"51",en:"3",npShift:"#",np:"३"},{code:"52",en:"4",npShift:"रु",np:"४"},{code:"53",en:"5",npShift:"%",np:"५"},{code:"54",en:"6",npShift:"^",np:"६"},{code:"55",en:"7",npShift:"&",np:"७"},{code:"56",en:"8",npShift:"*",np:"८"},{code:"59",en:"9",npShift:"(",np:"९"},{code:"48",en:"0",npShift:")",np:"०"},{code:"189",en:"-",npShift:"_",np:"-"},{code:"187",en:"=",npShift:"+‍‌‍‍‍‍",np:"="}]},t}]);var app=angular.module("typali");app.filter("filterByProperty",["$filter",function(e){return function(t,n,o){if(console.log("reached here",n,o),t){if(n){if("$"===o)return e("filter")(t,n);console.log(n);var r=n.toString().toLowerCase();return t.filter(function(e){return e[o].toString().toLowerCase().indexOf(r)>-1})}return t}}}]),function(){function e(e){var t=this,n="https://typali.herokuapp.com/api/";t.getString=function(t){var o=e({cache:!0,method:"GET",url:n+"getstring/"+t});return console.log("url : ",n+"getstring/"+t),o}}angular.module("typali").service("datafetchService",e),e.$inject=["$http"]}(),angular.module("typali").filter("capitalize",function(){return function(e,t){var n=t?/([^\W_]+[^\s-]*) */g:/([^\W_]+[^\s-]*)/;return e?e.replace(n,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}):""}}),function(){function e(e,t){var n=function(e){t.localStorage["typali-token"]=e},o=function(){return t.localStorage["typali-token"]},r=function(){var e,n=o();return!!n&&(e=n.split(".")[1],e=t.atob(e),e=JSON.parse(e),e.exp>Date.now()/1e3)};return{currentUser:function(){if(r()){var e=o(),n=e.split(".")[1];return n=t.atob(n),n=JSON.parse(n),{email:n.email,name:n.name}}},saveToken:n,getToken:o,isLoggedIn:r,register:function(t){return e.post("/api/register",t).success(function(e){n(e.token)})},login:function(t){return e.post("/api/login",t).success(function(e){console.log(e.token),n(e.token)})},logout:function(){t.localStorage.removeItem("typali-token")}}}angular.module("typali").service("authentication",e),e.$inject=["$http","$window"]}(),angular.module("typali.common",[]);