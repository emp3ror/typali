"use strict";function run(n,e,t,o){n.$on("$routeChangeStart",function(n,e,t){}),n.facebookAppId="[]"}function keyboardCtrl(n,e){function t(e){console.log("letter again = ",i.letter),$(".highlightLetter").removeClass("highlightLetter")," "==e?o="spacebar":a.indexOf(e)>-1?(o="c"+c[a.indexOf(e)],console.log(a,a.indexOf(e))):(o="c"+c[l.indexOf(e)],$(".shiftKey").addClass("highlightLetter")),console.log("letter again = ",i.letter,o),n.find("."+o).addClass("highlightLetter")}var o,i=this,r=i.keyboard;console.log("letter = ",i.letter);var c,a,l,p=[];for(var f in r)for(var d=0;d<r[f].length;d++)p.push(r[f][d]);p.map(function(n){return n.en}),c=p.map(function(n){return n.code}),a=p.map(function(n){return n.np}),l=p.map(function(n){return n.npShift}),this.$onInit=function(){console.log("changing"),t(i.letter)},console.log("in components",i.word,i.letter),this.$onChanges=function(n){console.log("changes",n),void 0!==n.letter&&t(n.letter.currentValue)}}function HeaderCtrl(n,e){}function FooterCtrl(n){}function PracticeCtrl(n,e,t,o,i,r,c){function a(){S.keyboard=M,T=[];for(var n in M)for(var e=0;e<M[n].length;e++)T.push(M[n][e]);z=T.map(function(n){return n.en}),E=T.map(function(n){return n.code}),q=T.map(function(n){return n.np}),I=T.map(function(n){return n.npShift})}function l(){y=H.split(" "),C=y.length,k=0,w=0,x=0,F=!1,S.highlight=y[k],S.highlightSingle="",S.text=y,setTimeout(function(){u()},1e3),S.isloading=!1}function p(){var n=P.length,t=y[k].substring(0,n);console.log(P,t),P!=t?S.alert=!0:(S.alert=!1,F&&w++,w=n,F=!0,h()),e.$apply()}function f(){console.log("space has been pressed"),P===y[k]&&(w=0,U+=P+" ",P="",S.sentence=U,S.word=P,k++,x=x+w+1,w=0,e.$apply(),k>=S.text.length?(O=!0,r.cancel(A),stop=void 0,S.msgbox=!0,console.log("string complete",S.msgbox),e.$apply()):(d(),u()),g())}function d(){S.highlight=y[k],h()}function h(){var n=y[k].charAt(w);if(""==n)return void(S.highlightSingle=" ");S.highlightSingle=n}function u(){var n=k+1;o.find(".text span").removeClass("highlightWord"),o.find(".text > span:nth-child("+n+")").addClass("highlightWord")}function s(){var n=new Date;j=n.getTime(),A=r(function(){S.time+=1},1e3)}function g(){var n=new Date,e=n.getTime(),t=e-j;S.timeTaken=t;var o=x/6*6e4/t;S.speed=Math.round(o)}function m(){S.art={title:L.title,author:L.author},console.log("textAll",L)}var S=this,v=t.param;void 0!==v&&""!=v||(v=Math.floor(10*Math.random())),S.isloading=!0;var y,C,b=!0,k=0,w=0,x=0,F=!1,j=0;S.time=0;var A,P="",U="",O=!1;S.sentence="",S.word="Type here",S.alert=!1;var H="सानो छ खेत",L={};c.getString(v).then(function(n){var e=n.data;L=e.data,H=e.data.text,l(),m()}).catch(function(n){console.log(n)});var T,z,E,q,I,M=void 0!==n.lang?i[n.lang]:i.unicode;console.log(M),a(),n.$on("lang",function(e,t){M=i[n.lang],a()}),$(".writeArea").on("click",function(){o.find(".writeArea input").focus()}),o.find(".writeArea input").on("keydown",function(n){if(console.log("keypress"),!O){b&&(b=!1,s());var t=n.which||n.charCode,o=n.shiftKey;if(8==t||46==t)console.log("backspace"),F&&w>0&&(w-=1,console.log("backspace",w)),P=P.substring(0,P.length-1),S.word=P,e.$apply(),p();else if(32==t)console.log("space has been pressed 1"),f();else{t+="";var i="";console.log("code = ",t,E.indexOf(t)),E.indexOf(t)>-1&&(i=o?T[E.indexOf(t)].npShift:T[E.indexOf(t)].np,console.log(i),P+=i,S.inputChar="",S.word=P,e.$apply(),p())}}}),S.highlightSingleFn=function(){O||h()}}function EditorCtrl(n){for(var e=["000000","FF9966","6699FF","99FF66","CC0000","00CC00","0000CC","333333","0066FF","FFFFFF"],t=$(".fore-palette"),o=$(".back-palette"),i=0;i<e.length;i++)t.append('<a href="#" data-command="forecolor" data-value="#'+e[i]+'" style="background-color:#'+e[i]+';" class="palette-item"></a>'),o.append('<a href="#" data-command="backcolor" data-value="#'+e[i]+'" style="background-color:#'+e[i]+';" class="palette-item"></a>');$(".toolbar a").click(function(n){var e=$(this).data("command");"h1"!=e&&"h2"!=e&&"p"!=e||document.execCommand("formatBlock",!1,e),"forecolor"!=e&&"backcolor"!=e||document.execCommand($(this).data("command"),!1,$(this).data("value")),"createlink"==e||"insertimage"==e?(url=prompt("Enter the link here: ","http://"),document.execCommand($(this).data("command"),!1,url)):document.execCommand($(this).data("command"),!1,null)})}function HomeCtrl(n,e){var t=this;e.lang="unicode",t.lang=e.lang,t.update=function(){console.log("lang",t.lang),e.lang=t.lang,e.$broadcast("lang",t.lang)}}var app=angular.module("typali",["ui.router","ngSanitize","angular-loading-bar"]).config(["$locationProvider","$stateProvider","$urlRouterProvider",function(n,e,t){n.hashPrefix("!"),t.otherwise("/404"),e.state("app",{url:"",views:{"header@":{controller:"HeaderCtrl",templateUrl:"components/common/header/header.tpl.html",controllerAs:"vm"},"footer@":{controller:"FooterCtrl",templateUrl:"components/common/footer/footer.tpl.html",controllerAs:"vm"}}}).state("app.404",{url:"/404",views:{"header@":{templateUrl:"components/common/header/header.tpl.html"}}}),n.html5Mode(!0)}]).run(["$rootScope","$location","authentication","$window",run]);angular.module("typali").component("keyboard2",{templateUrl:"components/common/keyboard/keyboard.tpl.html",controller:keyboardCtrl,bindings:{keyboard:"<",word:"<",letter:"<",shift:"<"}}),keyboardCtrl.$inject=["$document","$scope"],angular.module("typali").controller("HeaderCtrl",HeaderCtrl),HeaderCtrl.$inject=["$scope","$rootScope"],angular.module("typali").controller("FooterCtrl",FooterCtrl),FooterCtrl.$inject=["$scope"],angular.module("typali").config(["$stateProvider",function(n){n.state("app.practice",{url:"/practice",views:{"container@":{templateUrl:"views/practice/practice.tpl.html",controller:"practiceCtrl",controllerAs:"vm"}}}).state("app.practice.param",{url:"/:param",views:{"container@":{templateUrl:"views/practice/practice.tpl.html",controller:"practiceCtrl",controllerAs:"vm"}}})}]).controller("practiceCtrl",PracticeCtrl),PracticeCtrl.$inject=["$rootScope","$scope","$stateParams","$document","keyboardlayout","$interval","datafetchService"],angular.module("typali").config(["$stateProvider",function(n){n.state("app.editor",{url:"/editor",views:{"container@":{templateUrl:"views/editor/editor.tpl.html",controller:"editorCtrl",controllerAs:"vm"}}})}]).controller("editorCtrl",EditorCtrl),EditorCtrl.$inject=["$scope"],angular.module("typali").config(["$stateProvider",function(n){n.state("app.home",{url:"/",views:{"container@":{templateUrl:"views/home/home.tpl.html",controller:"HomeCtrl",controllerAs:"vm"}}})}]).controller("HomeCtrl",HomeCtrl),HomeCtrl.$inject=["$scope","$rootScope"],function(){function n(n,e){}angular.module("typali").config(["$stateProvider",function(n){n.state("app.register",{url:"/register",views:{"container@":{templateUrl:"auth/user-register/user-register.tpl.html",controller:"UserRegisterCtrl",controllerAs:"vm"}}})}]).controller("UserRegisterCtrl",n),n.$inject=["$location","authentication"]}(),function(){function n(n,e){var t=this;t.credentials={email:"yo@hotmail.com",password:""},t.onSubmit=function(){e.login(t.credentials).error(function(n){console.log(n)}).then(function(){n.path("profile")})}}angular.module("typali").config(["$stateProvider",function(n){n.state("app.login",{url:"/login",views:{"container@":{templateUrl:"auth/login/login.tpl.html",controller:"LoginCtrl",controllerAs:"vm"}}})}]).controller("LoginCtrl",n),n.$inject=["$location","authentication"]}(),angular.module("typali").factory("socket",["$rootScope",function(n){var e=io.connect();return{on:function(t,o){e.on(t,function(){var t=arguments;n.$apply(function(){o.apply(e,t)})})},emit:function(t,o,i){e.emit(t,o,function(){var t=arguments;n.$apply(function(){i&&i.apply(e,t)})})}}}]);var app=angular.module("typali");app.filter("limitobj",[function(){return function(n,e){if("object"!=typeof n)return[];var t=Object.keys(n);if(t.length<1||void 0===t)return[];var o=new Object,i=0;return angular.forEach(t,function(t,r){if(i>=e)return!1;o[t]=n[t],i++}),o}}]),angular.module("typali").factory("keyboardlayout",["$rootScope",function(n){var e={};return e.unicode={qwerty:[{code:"81",en:"q",npShift:"ठ",np:"ट"},{code:"87",en:"w",npShift:"औ",np:"ौ"},{code:"69",en:"e",npShift:"ै",np:"े"},{code:"82",en:"r",npShift:"ृ",np:"र"},{code:"84",en:"t",npShift:"थ",np:"त"},{code:"89",en:"y",npShift:"ञ",np:"य"},{code:"85",en:"u",npShift:"ू",np:"ु"},{code:"73",en:"i",npShift:"ी",np:"ि"},{code:"79",en:"o",npShift:"ओ",np:"ो"},{code:"80",en:"p",npShift:"फ",np:"प"},{code:"219",en:"[",npShift:"ई",np:"इ"},{code:"221",en:"]",npShift:"ऐ",np:"ए"},{code:"220",en:"\\",npShift:"ः",np:"ॐ"}],asdfg:[{code:"65",en:"a",npShift:"आ",np:"ा"},{code:"83",en:"s",npShift:"श",np:"स"},{code:"68",en:"d",npShift:"ध",np:"द"},{code:"70",en:"f",npShift:"ऊ",np:"उ"},{code:"71",en:"g",npShift:"घ",np:"ग"},{code:"72",en:"h",npShift:"अ",np:"ह"},{code:"74",en:"j",npShift:"झ",np:"ज"},{code:"75",en:"k",npShift:"ख",np:"क"},{code:"76",en:"l",npShift:"॥",np:"ल"},{code:"186",en:"l",npShift:":",np:";"},{code:"222",en:"l",npShift:'"',np:"'"}],zxcvb:[{code:"90",en:"z",npShift:"ऋ",np:"ष"},{code:"88",en:"x",npShift:"ढ",np:"ड"},{code:"67",en:"c",npShift:"च",np:"छ"},{code:"86",en:"v",npShift:"ँ",np:"व"},{code:"66",en:"b",npShift:"भ",np:"ब"},{code:"78",en:"n",npShift:"ण",np:"न"},{code:"77",en:"m",npShift:"ं",np:"म"},{code:"188",en:",",npShift:"ङ",np:","},{code:"190",en:".",npShift:">",np:"।"},{code:"191",en:"/",npShift:"?",np:"्"}],1234:[{code:"192",en:"`",enShift:"~",npShift:"~",np:"`"},{code:"49",en:"1",npShift:"!",np:"१"},{code:"50",en:"2",npShift:"@",np:"२"},{code:"51",en:"3",npShift:"#",np:"३"},{code:"52",en:"4",npShift:"रु",np:"४"},{code:"53",en:"5",npShift:"%",np:"५"},{code:"54",en:"6",npShift:"^",np:"६"},{code:"55",en:"7",npShift:"&",np:"७"},{code:"56",en:"8",npShift:"*",np:"८"},{code:"59",en:"9",npShift:"(",np:"९"},{code:"48",en:"0",npShift:")",np:"०"},{code:"189",en:"-",npShift:"_",np:"-"},{code:"187",en:"=",npShift:"+‍‌‍‍‍‍",np:"="}]},e.unicodeTraditional={qwerty:[{code:"81",en:"q",npShift:"त्त",np:"त्र"},{code:"87",en:"w",npShift:"ड्ढ",np:"ध"},{code:"69",en:"e",npShift:"ऐ",np:"भ"},{code:"82",en:"r",npShift:"द्ब",np:"च"},{code:"84",en:"t",npShift:"ट्ट",np:"त"},{code:"89",en:"y",npShift:"ठ्ठ",np:"थ"},{code:"85",en:"u",npShift:"ऊ",np:"ग"},{code:"73",en:"i",npShift:"क्ष",np:"ष"},{code:"79",en:"o",npShift:"इ",np:"य"},{code:"80",en:"p",npShift:"ए",np:"उ"},{code:"219",en:"[",npShift:"ृ",np:"र्"},{code:"221",en:"]",npShift:"ै",np:"े"},{code:"220",en:"\\",npShift:"ं",np:"्"}],asdfg:[{code:"65",en:"a",npShift:"आ",np:"ब"},{code:"83",en:"s",npShift:"ङ्क",np:"क"},{code:"68",en:"d",npShift:"ङ्ग",np:"म"},{code:"70",en:"f",npShift:"ँ",np:"ा"},{code:"71",en:"g",npShift:"द्द",np:"न"},{code:"72",en:"h",npShift:"झ",np:"ज"},{code:"74",en:"j",npShift:"ो",np:"व"},{code:"75",en:"k",npShift:"फ",np:"प"},{code:"76",en:"l",npShift:"ी",np:"ि"},{code:"186",en:";",npShift:"ट्ठ",np:"स"},{code:"222",en:"'",npShift:"ू",np:"ु"}],zxcvb:[{code:"90",en:"z",npShift:"क्क",np:"श"},{code:"88",en:"x",npShift:"ह्य",np:"ह"},{code:"67",en:"c",npShift:"ऋ",np:"अ"},{code:"86",en:"v",npShift:"ॐ",np:"ख"},{code:"66",en:"b",npShift:"ौ",np:"द"},{code:"78",en:"n",npShift:"द्य",np:"ल"},{code:"77",en:"m",npShift:"ड्ड",np:"ः"},{code:"188",en:",",npShift:"ङ",np:"ऽ"},{code:"190",en:".",npShift:"श्र",np:"।"},{code:"191",en:"/",npShift:"रु",np:"र"}],1234:[{code:"192",en:"`",enShift:"~",npShift:"॥",np:"ञ`"},{code:"49",en:"1",enShift:"!",npShift:"ज्ञ",np:"१"},{code:"50",en:"2",enShift:"@",npShift:"ई",np:"२"},{code:"51",en:"3",enShift:"#",npShift:"घ",np:"३"},{code:"52",en:"4",enShift:"$",npShift:"द्ध",np:"४"},{code:"53",en:"5",enShift:"%",npShift:"छ",np:"५"},{code:"54",en:"6",enShift:"^",npShift:"ट",np:"६"},{code:"55",en:"7",enShift:"&",npShift:"ठ",np:"७"},{code:"56",en:"8",enShift:"*",npShift:"ड",np:"८"},{code:"59",en:"9",enShift:"(",npShift:"ढ",np:"९"},{code:"48",en:"0",enShift:")",npShift:"ण",np:"०"},{code:"189",en:"-",enShift:"_",npShift:"ओ",np:"औ"},{code:"187",en:"=",enShift:"+‍‌‍‍‍‍",npShift:"‌‌‌‌‍‍‍",np:"‌‍‍‍‍‍‍"}]},e}]);var app=angular.module("typali");app.filter("filterByProperty",["$filter",function(n){return function(e,t,o){if(console.log("reached here",t,o),e){if(t){if("$"===o)return n("filter")(e,t);console.log(t);var i=t.toString().toLowerCase();return e.filter(function(n){return n[o].toString().toLowerCase().indexOf(i)>-1})}return e}}}]),function(){function n(n){var e=this,t="https://typali.herokuapp.com/api/";e.getString=function(e){var o=n({cache:!0,method:"GET",url:t+"getstring/"+e});return console.log("url : ",t+"getstring/"+e),o}}angular.module("typali").service("datafetchService",n),n.$inject=["$http"]}(),angular.module("typali").filter("capitalize",function(){return function(n,e){var t=e?/([^\W_]+[^\s-]*) */g:/([^\W_]+[^\s-]*)/;return n?n.replace(t,function(n){return n.charAt(0).toUpperCase()+n.substr(1).toLowerCase()}):""}}),function(){function n(n,e){var t=function(n){e.localStorage["typali-token"]=n},o=function(){return e.localStorage["typali-token"]},i=function(){var n,t=o();return!!t&&(n=t.split(".")[1],n=e.atob(n),n=JSON.parse(n),n.exp>Date.now()/1e3)};return{currentUser:function(){if(i()){var n=o(),t=n.split(".")[1];return t=e.atob(t),t=JSON.parse(t),{email:t.email,name:t.name}}},saveToken:t,getToken:o,isLoggedIn:i,register:function(e){return n.post("/api/register",e).success(function(n){t(n.token)})},login:function(e){return n.post("/api/login",e).success(function(n){console.log(n.token),t(n.token)})},logout:function(){e.localStorage.removeItem("typali-token")}}}angular.module("typali").service("authentication",n),n.$inject=["$http","$window"]}(),angular.module("typali.common",[]);